p8105\_hw2\_hh2767.Rmd
================
Haoran Hu
2018-09-30

``` r
nyc_transit = read_csv(file = ".\\data\\NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
mutate(entry = ifelse(entry == "NO", FALSE, TRUE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

This dataset contains variables that describe NYC transits. The variables are:lines, station names, station locations, the routes that the station serves, entry type, vendings, ADA compliances and so on. So far, I have selected the variables that we need, cleaned the variable names, and turned entry variable from character variable into logical variable. The dimension of the data set is 1868\* 19. These data are tidy.

``` r
distinct_stations = distinct(nyc_transit, station_name, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, .keep_all = TRUE) 
```

There are 456 distinct stations. 79 of the stations are ada compliant.

``` r
etr_novending = filter(nyc_transit, vending == "NO")
no_vend_allow_etr = sum(etr_novending$entry)
num_etr_novending = nrow(etr_novending)
```

The proportion of station entrances / exits without vending that allow entrance is 0.377.

In the following part, I will reformat data so that route number and route name are distinct variables, and the data will become clean data.

``` r
tidy_nyc_transit = gather(nyc_transit, key = route_num, value = route_name, route1:route11) %>% 
  filter(!is.na(route_name)) %>% 
  distinct()

station_serve_A = distinct(tidy_nyc_transit,  station_name, .keep_all = TRUE) %>% 
  filter(route_name == "A")
```

The number of distinct station that serve the A train is 48, and among those stations, 0.208

Problem 2
=========

``` r
wheel_trash = readxl::read_excel(".\\data\\HealthyHarborWaterWheelTotals2017-9-26.xlsx", range = "A2:N258") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster))
wheel_trash$sports_balls = round(wheel_trash$sports_balls)
wheel_trash$sports_balls = as.integer(wheel_trash$sports_balls)
```

``` r
pptn_2017 = readxl::read_excel(".\\data\\HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2017 Precipitation") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(precipitation_in)) %>% 
  filter(!is.na(x_1)) %>% 
  mutate(year = 2017)

pptn_2016 = readxl::read_excel(".\\data\\HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2016 Precipitation") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(precipitation_in)) %>% 
  filter(!is.na(x_1)) %>% 
  mutate(year = 2016)

pptn = bind_rows(pptn_2016, pptn_2017)

pptn = filter(pptn, pptn$precipitation_in != "Month")
pptn$precipitation_in = as.integer(pptn$precipitation_in)
pptn_precipitation_in = tibble(pptn$precipitation_in)
pptn$precipitation_in = apply(pptn_precipitation_in, 2, function(x) month.name[x])
```

Problem 3
=========

Use the following code chunk to clean the data for problem 3.

``` r
brfss_smart2010 = janitor::clean_names(brfss_smart2010)
colnames(brfss_smart2010)[2] = "location_abbr"
colnames(brfss_smart2010)[3] = "location_desc"

brfss_smart2010 = filter(brfss_smart2010, topic == "Overall Health") %>% 
  select(-class, -topic, -question, -sample_size, -(confidence_limit_low:geo_location)) %>% 
  spread(key = response, value = data_value) %>% 
  janitor::clean_names() %>% 
  select(year, location_abbr, location_desc, poor, fair, good, very_good, excellent) %>% 
  mutate(above_good = very_good + excellent) 
brfss_smart2010$poor = lapply(brfss_smart2010$poor, function(x) x/100)
brfss_smart2010$fair = lapply(brfss_smart2010$fair, function(x) x/100)
brfss_smart2010$good = lapply(brfss_smart2010$good, function(x) x/100)
brfss_smart2010$very_good = lapply(brfss_smart2010$very_good, function(x) x/100)
brfss_smart2010$excellent = lapply(brfss_smart2010$excellent, function(x) x/100)
brfss_smart2010$above_good = lapply(brfss_smart2010$above_good, function(x) x/100)

#distinct locations
```
